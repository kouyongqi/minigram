<!--pages/profile/edit.wxml-->
<view class="container">
  <!-- 顶部导航栏 -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="goBack">
      <text class="nav-icon">←</text>
    </view>
    <text class="nav-title">编辑资料</text>
    <view class="nav-right" bindtap="saveProfile">
      <text class="save-btn">保存</text>
    </view>
  </view>

  <!-- 主内容区 -->
  <view class="edit-content">
    <!-- 头像编辑 -->
    <view class="avatar-section">
      <text class="section-title">头像</text>
      <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
        <view class="edit-icon">✏️</view>
      </button>
    </view>

    <!-- 基本信息编辑 -->
    <view class="info-section">
      <text class="section-title">基本信息</text>
      
      <view class="form-item">
        <text class="form-label">昵称</text>
        <input class="form-input" type="nickname" value="{{userInfo.nickName}}" bindchange="onNicknameChange" placeholder="请输入昵称"/>
      </view>
      
      <view class="form-item">
        <text class="form-label">年级</text>
        <picker class="form-picker" bindchange="onGradeChange" value="{{gradeIndex}}" range="{{grades}}">
          <view class="picker-value">{{grades[gradeIndex] || '请选择年级'}}</view>
        </picker>
      </view>
      
      <view class="form-item">
        <text class="form-label">学校</text>
        <input class="form-input" value="{{school}}" bindinput="onSchoolChange" placeholder="请输入学校名称"/>
      </view>
      
      <view class="form-item">
        <text class="form-label">班级</text>
        <input class="form-input" value="{{className}}" bindinput="onClassChange" placeholder="请输入班级"/>
      </view>
    </view>

    <!-- 联系方式 -->
    <view class="contact-section">
      <text class="section-title">联系方式</text>
      
      <view class="form-item">
        <text class="form-label">手机号</text>
        <button wx:if="{{!phoneNumber}}" class="phone-btn" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">
          绑定手机号
        </button>
        <view wx:else class="phone-display">
          <text>{{phoneNumberDisplay}}</text>
          <text class="change-phone" bindtap="changePhone">更换</text>
        </view>
      </view>
    </view>
  </view>
</view>